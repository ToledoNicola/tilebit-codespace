{"mappings":"AAAC,WAOCA,OAAOC,aAAeD,OAAOC,cAAgB,GAC7C,MAAMC,EAAY,IAAIC,gBAAgBH,OAAOI,SAASC,QACtD,IAAIC,EAAkB,iDAClBC,EAAkB,iDAClBC,EAAiB,iDACjBC,EAAe,GACfC,EAAc,GAEdC,GAAgB,EAChBC,EAAS,KACTC,EAAU,KACVC,EAAQ,KACRC,EAAS,KACTC,EAAa,CAAC,EACdC,EAAqB,KAEzB,MAAMC,EAA2B,OAE3BC,EAA0B,OAChC,IAAIC,EAAclB,EAAUmB,IAAI,gBAC5BnB,EAAUmB,IAAI,gBACdC,aAAaC,QAAQ,8BA+DzB,MAAMC,EAAc,MACdC,KAA8BV,GAChCW,EAAE,SAASC,OAGbC,gBAIAF,EAAE,4CAA4CG,IAAI,SAASC,OAAM,SAAUC,GAEzE,OADAA,EAAMC,mBACC,CACT,IAEAN,EA3F6B,qBA2FDG,IAAI,SAASC,OAAM,SAAUC,GAGvD,IAAKhB,EAEH,YADAW,EAAE,uBAAuB,GAAGI,QAU9B,IAPeJ,EAAEO,MACdC,SACAC,WACAC,KAAK,SACLC,SAAS,2BAGIZ,IAEd,YADAzB,OAAOI,SAASkC,KAAO,YAIzB,MAAMC,EAAWb,EAAEO,MAAMO,KAAK,mBACxBC,EAAKf,EAAEO,MAAMS,QAAQ,gBAAgBF,KAAK,eApEpD,SAAuBG,EAASJ,EAAUK,GACxC,MAAMC,EAAW,cAAcD,cAAwBL,IACvD,IAAIO,EAAkBH,EAAQP,KAAK,wBAAwBW,QAE3DC,eAAeC,EAAeC,GAC5BC,YAAW,WACTR,EAAQS,KAAKF,GACbC,YAAW,WACTR,EAAQU,QACRV,EAAQW,OAAOR,GACfH,EAAQY,IAAI,CAAE,iBAAkB,QAClC,GAAG,KACL,GAAG,KACL,CAEAZ,EAAQY,IAAI,CAAE,iBAAkB,SAChCZ,EAAQU,QACRV,EAAQS,KAAK,cAEbI,EAASlD,EAAiBuC,EAAU,OACjCY,MAAKC,IACJjD,EAAeiD,EAAanB,GAC5B7B,EAC6B,MAA3BD,EAAakD,OAAO,GAAa,mBAAqB,YACxDhD,GAAgB,EAEhBiD,SAASC,YAAY,QACrBZ,EAAe,cAEhBa,OAAMC,IACLd,EAAec,EAAA,GAErB,CAqCIC,CAActC,EAAEO,MAAOM,EAAUE,EACnC,IAEA,IAAIwB,YAAY,yBAAyBC,GAAG,WAAW,SAAUC,GAC/D,MAAMC,EAAgBD,EAAGE,QAAQC,OACjCF,EAAcG,WAAW,UACzBH,EAAcI,MAChB,IAEAC,MAAM,uBAAwB,CAC5BJ,QAAS,SACTK,SAAU,IACVC,OAAOC,GACLzB,YAAW,KACTyB,EAASjD,MAAI,GACZ,IACL,IAGFD,EAAE,wBAAwBG,IAAI,SAASC,OAAMkB,eAAgBjB,GAE3D,IAAKhB,EAEH,YADAW,EAAE,uBAAuB,GAAGI,QAI9B,MAAMsC,EAAgBnC,KAAKqC,OACrBO,EAASnD,EAAEO,MAAMS,QAAQ,gBAAgBF,KAAK,cAIpD,GAFuD,gBAArDd,EAAEO,MAAMS,QAAQ,eAAeF,KAAK,cAIpC,GADAxB,EAAW8D,WAAa9D,EAAW8D,YAAc,IACH,IAA1C9D,EAAW8D,WAAWC,QAAQF,GAAgB,CAChD7D,EAAW8D,WAAWE,KAAKH,GAC3B,MAAMI,EAAMjE,EAAW8D,WAAWI,QAAU,EAQ5C,OAPAlE,EAAWmE,cAAgBF,QACrBlE,EAAOqE,OAAO,CAClBC,kBAAmBC,KAAKC,UAAUvE,EAAW8D,cAG/CV,EAAcG,WAAW,cACzBH,EAAcI,MAEhB,OAGA,GADAxD,EAAWwE,UAAYxE,EAAWwE,WAAa,IACF,IAAzCxE,EAAWwE,UAAUT,QAAQF,GAAgB,CAC/C7D,EAAWwE,UAAUR,KAAKH,GAC1B,MAAMI,EAAMjE,EAAWwE,UAAUN,QAAU,EAQ3C,OAPAlE,EAAWyE,aAAeR,QACpBlE,EAAOqE,OAAO,CAClBM,gBAAiBJ,KAAKC,UAAUvE,EAAWwE,aAG7CpB,EAAcG,WAAW,cACzBH,EAAcI,MAEhB,CAGFJ,EAAcG,WAAW,iBACzBH,EAAcI,MAChB,IAGA9C,EAAEkC,UAAUM,GAAG,QAAS,0BAA0B,WAChD,MAAMyB,EAAOjE,EAAEkE,KACblE,EAAEO,MAAMS,QAAQ,qBAAqBN,KAAK,iBAAiBgB,SAEpB,IAArCyC,SAASC,UAAUf,QAAQY,KAC7BE,SAASC,UAAUC,OAAOF,SAASC,UAAUf,QAAQY,GAAO,GAC5DE,SAASG,SAAWH,SAASC,UAAUZ,OACvCxD,EAAE,sBAAsB0B,KAAKyC,SAASG,UACtCjF,EAAOkF,eAAeJ,WAGxBnE,EAAEO,MAAMS,QAAQ,qBAAqBwD,QACvC,KAIFlD,eAAeQ,EAAS2C,EAActD,EAAUuD,EAAQC,GACtD,MAAMC,EAAM,GAAGH,KAAgBtD,IASzB0D,EAAU,C,OACdH,E,QAPc,CACdI,cAAe,UAAU5F,IACzB,eAAgB,oBAOhB6F,KAAMnB,KAAKC,UAAUc,IAGvB,IAEE,MAAMK,QAAiBC,MAAML,EAAKC,GAC5BK,QAAeF,EAASG,OAE9B,IAAKH,EAASI,GACZ,MAAMF,EAAO1D,QAEf,OAAO0D,CAET,CAAE,MAAO7C,GAGP,MAAM,IAAIgD,MAAMhD,EAClB,CACF,CAEA,SAAStC,IACP,IAAKR,EACH,OAAO,EAET,MAAM+F,GAAiB,IAAIC,MAAOC,UAClC,MAC+B,UAA7BjG,EAAmBkG,QACU,YAA7BlG,EAAmBkG,QACU,YAA7BlG,EAAmBkG,QACW,WAA7BlG,EAAmBkG,QAClBH,EAAiB/F,EAAmBmG,QAM1C,CAkFA,SAASC,EAAW1E,EAAS2E,EAASC,GAEpC,IAAIC,EAAQ7E,EAAQP,KAAK,aAAa,GACtC,MAAMqF,EAAUD,EAAME,YAgBtB/E,EAAQY,IAAI,CAAE,iBAAkB,SAChCiE,EAAME,YAAc,aAEpBlE,EAAShD,EArBQ,mBAqBkB,OAAQ,CACzCmH,SAAUL,EACVM,gBAAiBL,IAEhB9D,MAAKC,IAGJ,IAAKA,EAAamE,QAChB,MAAM,IAAId,MAAMrD,EAAaK,MAAMb,SAQrClD,OAAOI,SAASkC,KALD,oBAAXgF,EAKmB,mBAJE,eAIF,IAExBxD,OAAMC,KAnCTf,eAA8BE,GAC5BC,YAAW,WACTqE,EAAME,YAAcxE,EAGpBC,YAAW,WAETqE,EAAME,YAAcD,EAEpB9E,EAAQY,IAAI,CAAE,iBAAkB,QAClC,GAAG,KACL,GAAG,KACL,CAwBIN,CAAec,EAAA,GAErB,CAiEA,SAAS+D,EAAqBC,GAC5B,MAAMC,EAAO,IAAIf,KACjBe,EAAKC,QAAQF,GAEb,MAAMG,EAAMF,EAAKG,UACXC,EAAQJ,EAAKK,WACbC,EAAON,EAAKO,cAElB,MAAO,GAAGL,KAIZ,SAAsBE,GAgBpB,MAfmB,CACjB,UACA,WACA,QACA,QACA,MACA,OACA,OACA,SACA,YACA,UACA,WACA,YAGgBA,EACpB,CArBmBI,CAAaJ,MAAUE,GAC1C,CAmCA,GAAIlH,EAAa,CAEfqH,QAAQC,UACLjF,MAAKkF,IACJ5H,EAAS4H,EACTC,UAAUC,UAAU9H,EAAO+H,KAE3B,MAAMC,EAAiB,CAAC,EACxBA,EAAevD,UAAYF,KAAK0D,MAAMjI,EAAO2E,iBAAmB,MAChEqD,EAAejE,WAAaQ,KAAK0D,MAC/BjI,EAAOsE,mBAAqB,MAE9BrE,EAAa+H,CAAA,IAEdjF,OAAMmF,IACI,UA7EfjG,iBACE,IACE,MAAMkG,QAAY1F,EAASjD,EAAiB,eAAgB,OAAQ,CAClE4I,MAAO/H,IAEL8H,GAAKE,YACPxI,EAASsI,EAAIE,UACbvI,EAAUqI,EAAIP,KAAKlG,GACnB3B,EAAQoI,EAAIP,KACZF,QAAQY,eAAeH,EAAII,iBAC3BlI,EAAc8H,EAAII,gBAClBrI,EAAqBiI,EAAIP,KAAKY,OAElC,CAAE,MAAOxF,GACPyF,QAAQzF,MAAM,gCAChB,CACF,CAgEQ0F,GA0BN,MAAMC,EAAahI,EAAE,6BACfiI,EAAcjI,EAAE,+BAClBgI,EAAWxE,OAAS,GAzJ1B,WAEE0E,WAAa3I,EAGaS,EAAE,4BAA4B,GAAxD,MAGMmI,EAAkBnI,EAAE,4BACpBoI,EAAepI,EAAE,wBAAwB,GACzCqI,EAAoBrI,EAAE,6BAA6B,GACnDsI,EAAkBtI,EAAE,gCAAgC,GACpDuI,EAAiBvI,EAAE,gCAAgC,GACnDwI,EAAexI,EAAE,4BAA4B,GAC7CyI,EAAazI,EAAE,0BAA0B,GACzC0I,EAAY1I,EAAE,gCAAgC,GAGpDA,EAAEoI,GAAc1G,KAAKwG,WAAWzC,QAChCzF,EAAEwI,GAAc9G,KAAK0E,EAAqB8B,WAAWS,eACjDT,WAAWU,SACb5I,EAAEyI,GAAY/G,KAAK,YAEnB1B,EAAEyI,GAAY/G,KAAK0E,EAAqB8B,WAAWxC,WAIhDwC,WAAWzC,QAMZ1F,KAAmD,YAAtBmI,WAAWzC,QAC1CzF,EAAEsI,GAAiBrI,OAEI,WAArBiI,WAAWzC,SACbzF,EAAEuI,GAAgBtI,OAClBD,EAAE0I,GAAWzI,QAEW,aAAtBiI,WAAWzC,QACbzF,EAAEmI,GAAiBlI,QAbnBD,EAAEqI,GAAmBpI,MAezB,CA+GI4I,GAEEZ,EAAYzE,OAAS,GArO3B,WACE0E,WAAa3I,EAGb,MAAMuJ,EAAe9I,EAAE,mCAAmC,GACpD+I,EAAa/I,EAAE,gCAAgC,GAGrD,GAAyB,UAArBkI,WAAWzC,OAIb,OAHAzF,EAAE,iCAAiCC,YACnCD,EAAE,+BAA+BC,OAMnCD,EAAE+I,GAAY3I,OAAM,IAClBuF,EAAW3F,EAAE+I,GAAa,mBAAoBb,WAAWhC,mBAE3DlG,EAAE8I,GAAc1I,OAAM,IACpBuF,EACE3F,EAAE8I,GACF,oBACAZ,WAAWhC,kBAGjB,CA4MI8C,EAEJ,CAEA1K,OAAOC,aAAa+E,KAAK,CACvB,UACA2F,IACEnB,QAAQoB,IAAI,gCAEZ,MAAOC,GAAgBF,EAElBE,GAYLA,EAAa3G,GAAG,eAAe4G,IAC7BtB,QAAQoB,IAAI,gBACZpJ,GAAA,GACF,IAIJA,IAEAoC,SAASmH,iBAAiB,QAAQhJ,IAC5BpB,IAEFoB,EAAMiJ,cAAcC,QAAQvK,EAAaD,GACzCsB,EAAMmJ,iBACNvK,GAAgB,EAClB,IAGFe,EAAEkC,UAAUM,GACV,QACA,2CArUF,WACE,MAAMiH,EAAWnL,OAAOoL,WAAapL,OAAOoL,UAAUD,SAEtDE,OAAOC,SAASC,KAAK,CACnBC,QAAStK,EACTuK,MAAO1K,EAAO2K,MACdC,YAAarG,KAAKC,UAAU,CAC1BqG,UAAW/K,EACXgL,UAAW,CAAEV,SAAUA,KAEzBtD,QAAS,YAEb,IA6TAnG,EAAEkC,UAAUM,GACV,QACA,0CA9TF,WACE,MAAMiH,EAAWnL,OAAOoL,WAAapL,OAAOoL,UAAUD,SAEtDE,OAAOC,SAASC,KAAK,CACnBC,QAASrK,EACTsK,MAAO1K,EAAO2K,MACdC,YAAarG,KAAKC,UAAU,CAC1BqG,UAAW/K,EACXgL,UAAW,CAAEV,SAAUA,KAEzBtD,QAAS,YAEb,IAsTAnG,EAAEkC,UAAUM,GAAG,QAAS,gCApTxB,WAEEmH,OAAOC,SAASC,KAAK,CACnBO,SAAU7K,EAAmB8K,WAC7BJ,YAAarG,KAAKC,UAAU,CAC1BqG,UAAW/K,IAEbgH,QAAS,yBAEb,IA6SAnG,EAAEkC,UAAUM,GAAG,QAAS,gCA3SxB,WACEmH,OAAOC,SAASC,KAAK,CACnBO,SAAU7K,EAAmB+K,WAC7BL,YAAarG,KAAKC,UAAU,CAC1BqG,UAAW/K,IAEbgH,QAAS,yBAEb,GA0SF,EA3lBC,GA2lBI/D,OAAMmF,IACTO,QAAQzF,MAAMkF,EAAA","sources":["src/js/controller.js"],"sourcesContent":["(async () => {\n  /**\n   * --------------------------------------------------------------------------------------\n   * VARIABLES\n   *\n   */\n\n  window.fsAttributes = window.fsAttributes || [];\n  const urlParams = new URLSearchParams(window.location.search);\n  let baseUrlGTilebit = 'https://xju6-kpzy-l8vj.n7.xano.io/api:4lTavcfO';\n  let baseUrlGOutseta = 'https://xju6-kpzy-l8vj.n7.xano.io/api:8p4wLdYy';\n  let baseUrlGPaddle = 'https://xju6-kpzy-l8vj.n7.xano.io/api:9U9Y_l4P';\n  let platformData = '';\n  let contentType = '';\n  let platformSnippetAttribute = '[bmg-arco-button]';\n  let isSnippetCopy = false;\n  let xtoken = null;\n  let xUserId = null;\n  let xUser = null;\n  let member = null;\n  let memberJson = {};\n  let paddleSubscription = null;\n  // const paddleFreelanceMonthlyId = 52522; sandbox\n  const paddleFreelanceMonthlyId = 818898;\n  // const paddleFreelanceYearlyId = 52668; sandox\n  const paddleFreelanceYearlyId = 833839;\n  let accessToken = urlParams.get('access_token')\n    ? urlParams.get('access_token')\n    : localStorage.getItem('Outseta.nocode.accessToken');\n\n  /**\n   * --------------------------------------------------------------------------------------\n   * END VARIABLES\n   *\n   */\n\n  /**\n   * --------------------------------------------------------------------------------------\n   * MODELS\n   *\n   */\n\n  // function scrollToTop() {\n  //   // Smooth scroll animation\n  //   const element = document.getElementById('filters-section');\n  //   const elementPosition = element.getBoundingClientRect().top;\n  //   const offsetPosition =\n  //     window.pageYOffset || document.documentElement.scrollTop;\n  //   const scrollDistance = elementPosition + offsetPosition;\n\n  //   // Scroll smoothly to the element\n  //   window.scrollTo({\n  //     top: scrollDistance,\n  //     behavior: 'smooth',\n  //   });\n  // }\n\n  function copyComponent(element, platform, componentId) {\n    const endpoint = `components/${componentId}/platform/${platform}`;\n    let platformwrapper = element.find('[tb-pl-butt-wrapper]').clone();\ndebugger\n    async function displayMessage(message) {\n      setTimeout(function () {\n        element.text(message);\n        setTimeout(function () {\n          element.empty();\n          element.append(platformwrapper);\n          element.css({ 'pointer-events': 'auto' });\n        }, 1500);\n      }, 1500);\n    }\n\n    element.css({ 'pointer-events': 'none' });\n    element.empty();\n    element.text('Copying...');\n\n    callXApi(baseUrlGTilebit, endpoint, 'GET')\n      .then(responseData => {\n        platformData = responseData[platform];\n        contentType =\n          platformData.charAt(0) === '{' ? 'application/json' : 'text/html';\n        isSnippetCopy = true;\n\n        document.execCommand('copy');\n        displayMessage('Copied!');\n      })\n      .catch(error => {\n        displayMessage(error);\n      });\n  }\n\n  const setListener = () => {\n    if (isPaidSubscritionActive() || !member) {\n      $('.lock').hide();\n    }\n\n    setTippyHover();\n\n    // showLockPaidElm()\n\n    $('.actions-button-wrapper, [action-button]').off('click').click(function (event) {\n      event.stopPropagation();\n      return true;\n    });\n\n    $(platformSnippetAttribute).off('click').click(function (event) {\n      \n      //not logged in show modal\n      if (!member) {\n        $('[lock-modal-button]')[0].click();\n        return;\n      }\n      const isFree = $(this)\n        .parent()\n        .siblings()\n        .find('.lock')\n        .hasClass('w-condition-invisible');\n\n      //not paid member redirect to pricing\n      if (!isFree && !isPaidSubscritionActive()) {\n        window.location.href = '/pricing';\n        return;\n      }\n\n      const platform = $(this).attr('bmg-arco-button');\n      const id = $(this).closest('[tb-item-id]').attr('tb-item-id');\n      copyComponent($(this), platform, id);\n    });\n\n    new ClipboardJS('[data-clipboard-text]').on('success', function (el) {\n      const tippyInstance = el.trigger._tippy;\n      tippyInstance.setContent('Copied');\n      tippyInstance.show();\n    });\n\n    tippy('[data-tippy-content]', {\n      trigger: 'manual',\n      duration: 100,\n      onShow(instance) {\n        setTimeout(() => {\n          instance.hide();\n        }, 1000);\n      },\n    });\n\n    $('[comp-card-save-btn]').off('click').click(async function (event) {\n      debugger\n      if (!member) {\n        $('[lock-modal-button]')[0].click();\n        return;\n      }\n\n      const tippyInstance = this._tippy;\n      const itemId = $(this).closest('[tb-item-id]').attr('tb-item-id');\n      const isInspo =\n        $(this).closest('[comp-card]').attr('comp-card') === 'inspiration';\n\n      if (isInspo) {\n        memberJson.savedInspo = memberJson.savedInspo || [];\n        if (memberJson.savedInspo.indexOf(itemId) === -1) {\n          memberJson.savedInspo.push(itemId);\n          const num = memberJson.savedInspo.length || 0;\n          memberJson.savedInspoNum = num;\n          await member.update({\n            SavedInspirations: JSON.stringify(memberJson.savedInspo),\n          });\n\n          tippyInstance.setContent('Saved');\n          tippyInstance.show();\n          return;\n        }\n      } else {\n        memberJson.savedComp = memberJson.savedComp || [];\n        if (memberJson.savedComp.indexOf(itemId) === -1) {\n          memberJson.savedComp.push(itemId);\n          const num = memberJson.savedComp.length || 0;\n          memberJson.savedCompNum = num;\n          await member.update({\n            SavedComponents: JSON.stringify(memberJson.savedComp),\n          });\n\n          tippyInstance.setContent('Saved');\n          tippyInstance.show();\n          return;\n        }\n      }\n\n      tippyInstance.setContent('Already saved');\n      tippyInstance.show();\n    });\n\n    // todo da cambiare\n    $(document).on('click', '.hack32-like-item .del', function () {\n      const name = $.trim(\n        $(this).closest('.hack32-like-item').find('.hack32-title').text()\n      );\n      if (metadata.fileNames.indexOf(name) !== -1) {\n        metadata.fileNames.splice(metadata.fileNames.indexOf(name), 1);\n        metadata.itemsNum = metadata.fileNames.length;\n        $('.hack32-like-count').text(metadata.itemsNum);\n        member.updateMetaData(metadata);\n      }\n\n      $(this).closest('.hack32-like-item').remove();\n    });\n  };\n\n  // Funzione per effettuare la chiamata all'API\n  async function callXApi(baseUrlGroup, endpoint, method, data) {\n    const url = `${baseUrlGroup}/${endpoint}`;\n\n    // Imposta l'intestazione Authorization con il token di autenticazione\n    const headers = {\n      Authorization: `Bearer ${xtoken}`,\n      'Content-Type': 'application/json',\n    };\n\n    // Configurazione della richiesta\n    const options = {\n      method,\n      headers,\n      body: JSON.stringify(data),\n    };\n\n    try {\n      // Effettua la chiamata all'API utilizzando fetch() e attendi la risposta\n      const response = await fetch(url, options);\n      const result = await response.json();\n\n      if (!response.ok) {\n        throw result.message;\n      }\n      return result;\n      // Gestisci la risposta dell'API\n    } catch (error) {\n      debugger;\n      // Gestisci gli errori\n      throw new Error(error);\n    }\n  }\n\n  function isPaidSubscritionActive() {\n    if (!paddleSubscription) {\n      return false;\n    }\n    const Todaytimestamp = new Date().getTime();\n    if (\n      paddleSubscription.status == 'active' ||\n      paddleSubscription.status == 'trialing' ||\n      paddleSubscription.status == 'past_due' ||\n      (paddleSubscription.status == 'deleted' &&\n        Todaytimestamp < paddleSubscription.end_date)\n    ) {\n      return true;\n    }\n\n    return false;\n  }\n\n  function openFreelanceMonthlyCheckout() {\n    const referral = window.Rewardful && window.Rewardful.referral\n\n    Paddle.Checkout.open({\n      product: paddleFreelanceMonthlyId,\n      email: member.Email,\n      passthrough: JSON.stringify({\n        x_user_id: xUserId,\n        rewardful: { referral: referral },\n      }),\n      success: '/success',\n    });\n  }\n  function openFreelanceYearlyCheckout() {\n    const referral = window.Rewardful && window.Rewardful.referral\n\n    Paddle.Checkout.open({\n      product: paddleFreelanceYearlyId,\n      email: member.Email,\n      passthrough: JSON.stringify({\n        x_user_id: xUserId,\n        rewardful: { referral: referral },\n      }),\n      success: '/success',\n    });\n  }\n\n  function openUpdatePaddle() {\n\n    Paddle.Checkout.open({\n      override: paddleSubscription.update_url,\n      passthrough: JSON.stringify({\n        x_user_id: xUserId,\n      }),\n      success: '/subscription-updated',\n    });\n  }\n\n  function openCancelPaddle() {\n    Paddle.Checkout.open({\n      override: paddleSubscription.cancel_url,\n      passthrough: JSON.stringify({\n        x_user_id: xUserId,\n      }),\n      success: '/subscription-deleted',\n    });\n  }\n\n  function showLockPaidElm() {\n    $('.lock').css({ display: 'block', opacity: '0' });\n  }\n\n  function setPricingButtons() {\n    paddleInfo = paddleSubscription;\n\n    //get donwgrade and upgrade buttons\n    const downgradeBtn = $('[tb-el=\"downgrade-monthly-btn\"]')[0];\n    const upgradeBtn = $('[tb-el=\"upgrade-yearly-btn\"]')[0];\n\n    // if sub is not status active hide those buttons and retunr\n    if (paddleInfo.status != 'active') {\n      $('[tb-el=\"downgrade-modal-btn\"]').hide();\n      $('[tb-el=\"upgrade-modal-btn\"]').hide();\n\n      return;\n    }\n\n    // set click button to change the subscription\n    $(upgradeBtn).click(() =>\n      changePlan($(upgradeBtn), 'freelance-yearly', paddleInfo.subscription_id)\n    );\n    $(downgradeBtn).click(() =>\n      changePlan(\n        $(downgradeBtn),\n        'freelance-monthly',\n        paddleInfo.subscription_id\n      )\n    );\n  }\n\n  function changePlan(element, newPlan, subId) {\n    const endpoint = `user/change-plan`;\n    let divEl = element.find('div:first')[0];\n    const btnText = divEl.textContent;\n\n    async function displayMessage(message) {\n      setTimeout(function () {\n        divEl.textContent = message;\n\n        // divEl.text(message);\n        setTimeout(function () {\n          // divEl.text(btnText);\n          divEl.textContent = btnText;\n\n          element.css({ 'pointer-events': 'auto' });\n        }, 1500);\n      }, 1500);\n    }\n\n    element.css({ 'pointer-events': 'none' });\n    divEl.textContent = 'Loading...';\n\n    callXApi(baseUrlGPaddle, endpoint, 'POST', {\n      new_plan: newPlan,\n      subscription_id: subId,\n    })\n      .then(responseData => {\n        debugger;\n        //go to success page\n        if (!responseData.success) {\n          throw new Error(responseData.error.message);\n        }\n\n        if (newPlan == 'freelance-yearly') {\n          window.location.href = '/updated-plan';\n          return;\n        }\n\n        window.location.href = '/downgraded-plan';\n      })\n      .catch(error => {\n        displayMessage(error);\n      });\n  }\n\n  function showPaddleSubscriptionData() {\n    //check subscription if is null show free plan\n    paddleInfo = paddleSubscription;\n\n    //elements\n    const pricingSectionElm = $('[tb-el=\"member-pricing\"]')[0];\n    //const subFreelanceYElm = $('[tb-el=\"sub-freelance-y-block\"]')[0];\n    // const subFreelanceMElm = $('[tb-el=\"sub-freelance-m-block\"]')[0];\n    const subTrialTextElm = $('[tb-el=\"sub-trial-text\"]');\n    const subStatusElm = $('[tb-el=\"sub-status\"]')[0];\n    const profileSectionElm = $('[tb-el=\"profile-section\"]')[0];\n    const deletedBlockElm = $('[tb-el=\"deleted-info-block\"]')[0];\n    const nextPaymentElm = $('[tb-el=\"next-payment-block\"]')[0];\n    const renewDateElm = $('[tb-el=\"sub-renew-date\"]')[0];\n    const endDateElm = $('[tb-el=\"sub-end-date\"]')[0];\n    const updateBtn = $('[paddle-action-btn=\"update\"]')[0];\n\n    //set text\n    $(subStatusElm).text(paddleInfo.status);\n    $(renewDateElm).text(getDateFromTimestamp(paddleInfo.renewal_date));\n    if (paddleInfo.refunded) {\n      $(endDateElm).text('Refunded');\n    } else {\n      $(endDateElm).text(getDateFromTimestamp(paddleInfo.end_date));\n    }\n\n    //if subsciprion is not set\n    if (!paddleInfo.status) {\n      $(profileSectionElm).hide();\n      return;\n    }\n\n    //if sub is really active\n    if (isPaidSubscritionActive() && paddleInfo.status !== 'deleted') {\n      $(deletedBlockElm).hide();\n    }\n    if (paddleInfo.status == 'deleted') {\n      $(nextPaymentElm).hide();\n      $(updateBtn).hide();\n    }\n    if (paddleInfo.status !== 'trialing') {\n      $(subTrialTextElm).hide();\n    }\n  }\n\n  async function getTokensAndSync() {\n    try {\n      const res = await callXApi(baseUrlGOutseta, 'outseta/auth', 'POST', {\n        token: accessToken,\n      });\n      if (res?.authToken) {\n        xtoken = res.authToken;\n        xUserId = res.user.id;\n        xUser = res.user;\n        Outseta.setAccessToken(res.os_access_token);\n        accessToken = res.os_access_token;\n        paddleSubscription = res.user.paddle;\n      }\n    } catch (error) {\n      console.error('erore nel recupero xano token');\n    }\n  }\n\n  function getDateFromTimestamp(timestamp) {\n    const date = new Date();\n    date.setTime(timestamp);\n\n    const day = date.getDate();\n    const month = date.getMonth(); // Months are zero-indexed, so October is 9\n    const year = date.getFullYear();\n\n    return `${day} ${getMonthName(month)} ${year}`;\n  }\n\n  // Function to get the month name\n  function getMonthName(month) {\n    const monthNames = [\n      'January',\n      'February',\n      'March',\n      'April',\n      'May',\n      'June',\n      'July',\n      'August',\n      'September',\n      'October',\n      'November',\n      'December',\n    ];\n\n    return monthNames[month];\n  }\n\n  /**\n   * --------------------------------------------------------------------------------------\n   * END MODELS\n   *\n   */\n\n  /**\n   * --------------------------------------------------------------------------------------\n   * CONTROLLERS\n   *\n   */\n\n  //if accesstoken is preset the user is loggedin\n  if (accessToken) {\n    //fire only if user is loggedin\n    Outseta.getUser()\n      .then(user => {\n        member = user;\n        amplitude.setUserId(member.Uid);\n\n        const memberJsonData = {};\n        memberJsonData.savedComp = JSON.parse(member.SavedComponents || '[]');\n        memberJsonData.savedInspo = JSON.parse(\n          member.SavedInspirations || '[]'\n        );\n        memberJson = memberJsonData;\n      })\n      .catch(err => {\n        debugger;\n      });\n    // Generate xtoken if accessToken is present\n    await getTokensAndSync();\n\n    /**\n     * i fetch the paddle info directly from the xuser object\n     */\n    // try {\n    //   //fetch user paddle sub\n    //   const paddleRes = await callXApi(\n    //     baseUrlGPaddle,\n    //     'user/subscription',\n    //     'GET'\n    //   );\n    //   paddleSubscription = paddleRes;\n    //   //debugger;\n\n    //   // if (!isPaidSubscritionActive()) {\n    //   //   //show lock\n    //   //   showLockPaidElm()\n    //   // }\n    // } catch (error) {\n    //   console.error('erore nel recupero subscription');\n    // }\n\n    //get user subscription attribute and if exist means we are in the member page\n    //so show informations\n\n    const memberpage = $('[tb-el=\"profile-section\"]');\n    const pricingComp = $('[tb-el=\"pricing-component\"]');\n    if (memberpage.length > 0) {\n      showPaddleSubscriptionData();\n    }\n    if (pricingComp.length > 0) {\n      setPricingButtons();\n    }\n  }\n\n  window.fsAttributes.push([\n    'cmsload',\n    listInstances => {\n      console.log('cmsload Successfully loaded!');\n\n      const [listInstance] = listInstances;\n\n      if (!listInstance) {\n        return;\n      }\n\n      /**\n       * to manually activate the nest for all-compoennts inspirations with nest-collectin using slugs\n       * beasue inspiration collection has more than 100 items\n       */\n      // if(window.fsAttributes.cmsnest){\n      //     window.fsAttributes.cmsnest.init();\n      // }\n\n      listInstance.on('renderitems', renderedItems => {\n        console.log('page changed');\n        setListener();\n      });\n    },\n  ]);\n\n  setListener();\n\n  document.addEventListener('copy', event => {\n    if (isSnippetCopy) {\n      // recupra i dati salvati prima per il clipboard\n      event.clipboardData.setData(contentType, platformData);\n      event.preventDefault();\n      isSnippetCopy = false;\n    }\n  });\n\n  $(document).on(\n    'click',\n    '[paddle-action-btn=\"freelance-monthly\"]',\n    openFreelanceMonthlyCheckout\n  );\n\n  $(document).on(\n    'click',\n    '[paddle-action-btn=\"freelance-yearly\"]',\n    openFreelanceYearlyCheckout\n  );\n\n  $(document).on('click', '[paddle-action-btn=\"update\"]', openUpdatePaddle);\n\n  $(document).on('click', '[paddle-action-btn=\"cancel\"]', openCancelPaddle);\n\n  /**\n   * --------------------------------------------------------------------------------------\n   * END CONTROLLERS\n   *\n   */\n})().catch(err => {\n  console.error(err);\n});\n"],"names":["window","fsAttributes","urlParams","URLSearchParams","location","search","baseUrlGTilebit","baseUrlGOutseta","baseUrlGPaddle","platformData","contentType","isSnippetCopy","xtoken","xUserId","xUser","member","memberJson","paddleSubscription","paddleFreelanceMonthlyId","paddleFreelanceYearlyId","accessToken","get","localStorage","getItem","setListener","isPaidSubscritionActive","$","hide","setTippyHover","off","click","event","stopPropagation","this","parent","siblings","find","hasClass","href","platform","attr","id","closest","element","componentId","endpoint","platformwrapper","clone","async","displayMessage","message","setTimeout","text","empty","append","css","callXApi","then","responseData","charAt","document","execCommand","catch","error","copyComponent","ClipboardJS","on","el","tippyInstance","trigger","_tippy","setContent","show","tippy","duration","onShow","instance","itemId","savedInspo","indexOf","push","num","length","savedInspoNum","update","SavedInspirations","JSON","stringify","savedComp","savedCompNum","SavedComponents","name","trim","metadata","fileNames","splice","itemsNum","updateMetaData","remove","baseUrlGroup","method","data","url","options","Authorization","body","response","fetch","result","json","ok","Error","Todaytimestamp","Date","getTime","status","end_date","changePlan","newPlan","subId","divEl","btnText","textContent","new_plan","subscription_id","success","getDateFromTimestamp","timestamp","date","setTime","day","getDate","month","getMonth","year","getFullYear","getMonthName","Outseta","getUser","user","amplitude","setUserId","Uid","memberJsonData","parse","err","res","token","authToken","setAccessToken","os_access_token","paddle","console","getTokensAndSync","memberpage","pricingComp","paddleInfo","subTrialTextElm","subStatusElm","profileSectionElm","deletedBlockElm","nextPaymentElm","renewDateElm","endDateElm","updateBtn","renewal_date","refunded","showPaddleSubscriptionData","downgradeBtn","upgradeBtn","setPricingButtons","listInstances","log","listInstance","renderedItems","addEventListener","clipboardData","setData","preventDefault","referral","Rewardful","Paddle","Checkout","open","product","email","Email","passthrough","x_user_id","rewardful","override","update_url","cancel_url"],"version":3,"file":"index.c492f98e.js.map"}