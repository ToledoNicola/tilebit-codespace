{"mappings":"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","sources":["src/js/controller.js"],"sourcesContent":["window.onload = async () => {\n  const urlAPI = 'https://xju6-kpzy-l8vj.n7.xano.io/api:4lTavcfO/components/';\n  // contiene il json o testo della risposta, l'elemento da salvare in clipboard\n  let o = '';\n  //contiene il tipo application/json o text/html e fail controllo con la primo carattere se Ã¨ { da capire se puo rompere il flusso\n  let s = '';\n  let t = '[bmg-arco-button]';\n  let isSnippetCopy = false;\n  const memberstack = window.$memberstackDom\n  // Get current member's JSON\nlet memberJsonData = await memberstack.getMemberJSON();\nmemberJson = memberJsonData.data || {savedComp:[]};\n\nwindow.fsAttributes = window.fsAttributes || [];\n\nwindow.fsAttributes.push([\n    'cmsload',\n    listInstances => {\n      console.log('cmsload Successfully loaded!');\n\n      // The callback passes a `listInstances` array with all the `CMSList` instances on the page.\n      const [listInstance] = listInstances;\n\n      // The `renderitems` event runs whenever the list renders items after switching pages.\n      listInstance.on('renderitems', renderedItems => {\n        console.log('page changed');\n\n        setListener();\n\n\n      });\n         \n    const pageName = location.href.split(\"/\").slice(-1)[0]\n    // if there are file names saved in the metadata\n    if(memberJson.savedComp &&  pageName == 'saved'){\n      // for each liked item\n      // get it's name\n      $('[comp-card] [comp-card-title]').each((i,item)=>{\n        // if the liked item's name also exists in the metadata's file names\n        if(memberJson.savedComp.indexOf($.trim($(item).text())) !== -1){\n          // clone & append the liked item to the .user-files div\n          // (the reason for .clone() is to avoid removing it from its original .hack32-like-row)\n          $(item).closest('[comp-item]')\n          .removeClass('hide');\n          \n        }\t\t\n      });\n\n      //Webflow.require('ix2').init()\n    }  \n    },\n  ]);\n\n  //recupera lo snippet e modifica lo stato del bottone\n  function c(t, e, n) {\n    let logoPlatform = t.find('img').clone();\n    function i(e) {\n      setTimeout(function () {\n        t.text(e),\n          setTimeout(function () {\n            t.empty(),\n              t.append(logoPlatform),\n              t.css({ 'pointer-events': 'auto' });\n          }, 1500);\n      }, 1500);\n    }\n    let c = new XMLHttpRequest();\n    t.css({ 'pointer-events': 'none' }),\n      t.empty(),\n      t.text('Copying...'),\n      c.open('GET', urlAPI + n, !0),\n      (c.onload = function () {\n        let t = JSON.parse(this.response);\n        // qui imposta o e s che stanno sopra\n        c.status >= 200 && c.status < 400\n          ? ((o = t[e]),\n            (s = '{' == t[e].charAt(0) ? 'application/json' : 'text/html'),\n            (isSnippetCopy = true),\n            document.execCommand('copy'),\n            i('Copied!'))\n          : i(`Error: ${c.status}`);\n      }),\n      c.send();\n  }\n\n  document.addEventListener('copy', t => {\n    if (isSnippetCopy) {\n      // recupra i dati salvati prima per il clipboard\n      t.clipboardData.setData(s, o), t.preventDefault();\n      isSnippetCopy = false;\n    }\n  });\n\n  const setListener = () => {\n    //1 evento al click del platform button recuepro i dati necessari\n    //per la chiamata, l'id viene messo da wized come attributo\n    $(t).click(function (event) {\n      //event.stopPropagation();\n      //console.log($(this))\n      const platform = $(this).attr('bmg-arco-button');\n      const id = $(this).attr('comp-id');\n\n      c($(this), platform, id);\n    });\n\n    new ClipboardJS('[data-clipboard-text]');\n\n    tippy('[data-tippy-content]', {\n      trigger: 'click',\n      duration: 300,\n      onShow(instance) {\n        setTimeout(() => {\n          instance.hide();\n        }, 3000);\n      },\n    });\n\n      // when the like button button is clicked\n    // save the file's name to metadata\n    $('[comp-card-save-btn]').click(async function(){\t  \n      // get the name of the liked item\n      const name = $.trim($(this).closest('[comp-card]').find('[comp-card-title]').text());\n      // if the name does not already exist in the metadata fileNames\n      memberJson.savedComp = memberJson.savedComp || [];\n      if(memberJson.savedComp.indexOf(name) === -1){   \n        // push the name to the metadata.fileNames array\n        memberJson.savedComp.push(name);\n        // get the number of fileNames in the metadata\n        // or set the number as 0 if there are no existing filenames\n        const num = memberJson.savedComp.length || 0;\n        // set the metadata itemsNum as the number of filenames in the metadata\n        memberJson.savedCompNum = num;\n        // update memberstack with the new metadata object\n      await memberstack.updateMemberJSON({json: memberJson});\n      }\t\t\n    });\n\n\n        // when the delete button is clicked if in saved page\n    $(document).on('click', '.hack32-like-item .del', function(){\n      // get the name of the liked item\n      const name = $.trim($(this).closest('.hack32-like-item').find('.hack32-title').text());\n      // if the name exists in the metadata fileNames\n      if(metadata.fileNames.indexOf(name) !== -1){  \n        // remove the name from metadata fileNames\n        metadata.fileNames.splice(metadata.fileNames.indexOf(name), 1);\n        // update the number of items\n        metadata.itemsNum = metadata.fileNames.length;\n        // display the updated number of items\n        $('.hack32-like-count').text(metadata.itemsNum);\n        // update memberstack with the new metadata object\n        member.updateMetaData(metadata);\n      }\n      \n      // remove item from the saved items div\n      $(this).closest('.hack32-like-item').remove();\n    });\n  };\n\n\n  setListener();\n\n\n    \n\n   \n  \n  \n\n\n  \n};\n"],"names":["window","onload","async","urlAPI","o","s","isSnippetCopy","memberstack","$memberstackDom","memberJsonData","getMemberJSON","memberJson","data","savedComp","fsAttributes","push","listInstances","console","log","listInstance","on","renderedItems","setListener","pageName","location","href","split","slice","$","each","i","item","indexOf","trim","text","closest","removeClass","document","addEventListener","t","clipboardData","setData","preventDefault","click","event","platform","this","attr","id","e","n","logoPlatform","find","clone","setTimeout","empty","append","css","c","XMLHttpRequest","open","JSON","parse","response","status","charAt","execCommand","send","ClipboardJS","tippy","trigger","duration","onShow","instance","hide","name","num","length","savedCompNum","updateMemberJSON","json","metadata","fileNames","splice","itemsNum","member","updateMetaData","remove"],"version":3,"file":"index.dbeac29a.js.map"}